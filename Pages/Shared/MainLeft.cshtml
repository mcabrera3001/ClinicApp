@using Microsoft.AspNetCore.Identity
@inject SignInManager<ClinicApp.Models.ApplicationUser> SignInManager
@inject UserManager<ClinicApp.Models.ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    var roles = await UserManager.GetRolesAsync(user);

    <nav class="bg-light sidebar">
        <div class="sidebar-sticky">
            <ul class="nav flex-column">
                @if (roles.Contains("admin"))
                {
                    <li class="nav-item">
                        <a class="nav-link active" asp-area="Admin" asp-page="/AdminDashboard">Dashboard</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="patientsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Patients
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="patientsDropdown">
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/CreatePatient">Create Patient</a></li>
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/Patients/Edit">Edit Patient</a></li>
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/Patients/List">List Patients</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="doctorsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Doctors
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="doctorsDropdown">
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/CreateDoctor">Create Doctor</a></li>
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/Doctors/Edit">Edit Doctor</a></li>
                            <li><a class="dropdown-item" asp-area="Admin" asp-page="/Doctors/List">List Doctors</a></li>
                        </ul>
                    </li>
                }
                @if (roles.Contains("doctor"))
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-page="/Doctor/Index">Doctor Dashboard</a>
                    </li>
                }
                @if (roles.Contains("patient"))
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-page="/Patient/Index">Patient Dashboard</a>
                    </li>
                }
            </ul>
        </div>
    </nav>
}
